<!DOCTYPE html>
<html>
<head>
        <title>encukou/blog &mdash; Týdenní poznámky #7</title>
        <meta charset="utf-8" />
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <link rel="stylesheet" type="text/css" href="https://encukou.cz/theme/css/style.css" />
        <link href='https://fonts.googleapis.com/css?family=Signika|Jockey+One&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
        <style type="text/css">
            body.custom-background { background-color: #f5f5f5; }
        </style>
        <link rel="alternate" type="application/atom+xml"
            title="encukou/blog — Atom"
            href="https://encukou.cz/feeds/all.atom.xml" />
        <link rel="icon" type="image/png" href="https://encukou.cz/images/eck512.png">
        <!--[if lte IE 8]><script src="https://encukou.cz/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background single-author" >
    <div id="container">
        <div id="header">
                <h1 id="site-title"><a href="https://encukou.cz"><span class="_en">en</span><span class="_cu">cu</span><span class="_kou">kou</span>.cz</a></h1>
                <h2 id="site-description">primary colors underneath</h2>
        </div><!-- /#banner -->
        
        <div class="page-title">
        </div>

        <div id="menu">
            <div class="menu-navigation-container">
                <ul id="menu-navigation" class="menu">
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _kou"><a href="mailto:encukou@gmail.com">e-mail</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _cu"><a href="https://twitter.com/encukou">twitter</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _en"><a href="https://github.com/encukou">github</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://encukou.cz">home</a></li>

                </ul>
            </div> <!--/#menu-navigation-container-->
        </div><!-- /#menu -->

        <div id="contents">

<div class="post type-post status-publish format-standard hentry category-general">
    <div class="entry-meta">
        <div class="date"><a href="https://encukou.cz/blog/2021/02/19/cs-tydenni-07">2021-02-19</a></div>
    </div> <!-- /#entry-meta -->
    <div class="main">
        <h2 class="entry-title">
            <a href="https://encukou.cz/blog/2021/02/19/cs-tydenni-07" title="Permalink to Týdenní poznámky #7" rel="bookmark">Týdenní poznámky #7</a>
        </h2>
        <div class="entry-content">


<p>Utekl další týden (16. 2. – 19. 2.), a&nbsp;tak si sepisuju, co jsem&nbsp;dělal.</p>


<h2 id="pondeli-kurz">Pondělí: Kurz!</h2>
<p>V pondělí jsem zpracovával registrace ne kurz, vítal účastníky, odpovídal
na otázky.
I&nbsp;na přípravu a&nbsp;točení videí na instalační lekci zbyla trocha času,
i&nbsp;když ne tolik, kolik bych&nbsp;chtěl.</p>
<p>Většina týmů se přihlásila v pondělí a&nbsp;úterý, ale spočítal jsem je až později,
když jsem uzavíral přihlášky.
Celkem je týmů 56&nbsp;a&nbsp;mají od dvou do pěti lidí.
I&nbsp;kdyby to bylo jen 56&nbsp;lidí, byl by to největší kurz co jsem zatím učil,
a&nbsp;tak doufám, že náročnost neroste&nbsp;lineárně.</p>
<p>Docela dost týmů má někoho, kdo není úplný začátečník; snad i&nbsp;tohle ze začátku
trochu uleví koučům.</p>
<p>Večer byl další sraz projektu Freezeyt.
Tentokrát se k nám přidal nový člen (který v klubu junior.guru hledal projekt,
tak jsem ho tak trochu naverboval).
A&nbsp;tak jsem prošel celý kód, vysvětloval co to dělá a&nbsp;odpovídal na otázky.
Všem je to teď jasnější – ne jen&nbsp;nováčkovi.</p>
<p>Další Freezeyt srazy jsme přesunuli na úterý, protože v pondělí bude
začátečnický kurz.</p>
<h2 id="utery-cpython">Úterý: CPython</h2>
<p>Úterky mám vyhrazené na vylepšování stabilního ABI.
A&nbsp;tak jsem dělal přesně tohle.
Jediné co je z toho vidět je <a href="https://github.com/python/cpython/pull/24551">pull request na zveřejnění funkce <code>PyCFunction_New</code></a>,
která byla k dispozici na Windows ale ne na&nbsp;Linuxu.</p>
<p>To je docela rarita.
Většinou to bývá naopak, protože Windows má <a href="https://github.com/python/cpython/blob/d5fc99873769f0d0d5c5d5d99059177a75a4e46e/PC/python3dll.c">seznam exportovaných fukcí</a>,
ktežto Linuxu se exportuje každá funkce nadefinovaná jako API.
Jenže zrovna <code>PyCFunction_New</code> byla nadefinována jako makro, což znamená,
že v C fungovala normálně ale z jiných jazyků by použít&nbsp;nešla.</p>
<h2 id="streda">Středa</h2>
<p>Nějakou dobu už se nám na nejnovější Fedoře nedaří zkompilovat
Python 3.4, 3.5&nbsp;a&nbsp;3.6, tak jsem se na to ve podíval.
Jde o&nbsp;dvě nezávislé chyby.
Na jednu jsem přišel docela rychle, ale pak jsem většinu dne
strávil tím, že jsem se snažil tu druhou zreplikovat na svém počítači.
Bylo do dost frustrující.</p>
<h2 id="ctvrtek">Čtvrtek</h2>
<p>Ve čtvrtek jsem chybu v&nbsp;Pythonu 3.5&nbsp;konečně dostal u&nbsp;sebe,
po pár pokusech jsem místo „testy spadnou“ věděl, který z testů padá,
pak která funkce a&nbsp;pak i&nbsp;který řádek Pythoního kódu.
To ale nestačilo: pokračoval jsem řádkem C kódu a&nbsp;nakonec i&nbsp;konkrétní
instrukcí procesoru.
K tomu jsem si musel dohledat, co vlastně dělají instrukce jako <code>punpcklqdq</code> a
<code>movaps</code> – a&nbsp;najednou to začlo být jasné.
Instrukce <code>movaps</code> totiž pracuje s daty, které jsou v paměti zarovnané:
začínají na sudém bajtu.
Za to je (předpokládám) trochu rychlejší než alternativy.
No a&nbsp;novější překladač C se snaží vytvořit co nejrychlejší kód, a&nbsp;tak tam, kde
umí dokázat že příslušná data musí být zarovnaná, použije tuhle instrukci.
No a&nbsp;protože zdrojáky Pythonu 3.6, zdá se, neodpovídají úplně přesně detailům
standardu C, chyba je na světě.</p>
<p>Večer jsem <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1923658#c13">chybu a&nbsp;svou analýzu</a> ukázal Victorovi, který si
vzpomněl že v Pythonu 3.7&nbsp;se něco podobného řešilo a&nbsp;nasměroval mě na&nbsp;opravu.
Hurá!</p>
<p>Jo, a&nbsp;taky ve čtvrtek začal <a href="https://www.devconf.info/cz/">DevConf</a>, tak jsem koukal na pár&nbsp;přednášek.</p>
<h2 id="patek-devconf">Pátek: DevConf</h2>
<p>DevConf pokračoval i&nbsp;v pátek.
Sledoval jsem další přednášky, ale ty online konference prostě nejsou ono.
Zpětně mi to přijde spíš jako promrhaný čas :(</p>        </div> <!--/#entry-content-->
            <span class="tag-links"><strong>⚑</strong>
 <a href="https://encukou.cz/blog/tag/weekly" rel="tag">weekly</a>            </span>
        <ul class="article-links">
                <li><a href="mailto:encukou@gmail.com?subject=Re:+článek+'T%C3%BDdenn%C3%AD%20pozn%C3%A1mky%20%237'">Přidat <em>komentář</em></a></li>
                <li><a href="https://github.com/encukou/blog/blob/master/posts/2021-02-19-cs-tydenni-07.md"><em>Forknout</em> tenhle článek na Githubu</a></li>
        </ul>
    </div> <!--/#main-->
</div>  <!--/#post-->
        </div>


<ul class="prev-next">
    <li class="prev">
        <a href="https://encukou.cz/blog/2021/02/12/cs-tydenni-06">
            Týdenní poznámky #6
        </a>
    </li>
</ul>
<span class="clearfix"></span>


        <footer id="footer">
            <p>
        
    tento blog používá systém <a href="https://getpelican.com/">Pelican</a>
    <br>
    styl adaptovaný z <a href="https://github.com/tbunnyman/pelican-chunk">pelican-chunk</a>
        © <a href="https://twitter.com/thisistran">Tran</a>
        a <a href="https://bunnyman.info/">tBunnyMan</a>
    <br>
    použité fonty: Signika © <a href="http://ancymonic.com/">Anna Giedryś</a>
        a Jockey One © <a href="www.type-together.com">TypeTogether</a>
    <br>
    tento blog je na <a href="https://github.com/encukou/blog">Githubu</a>
    <br>
    <br>
    text na této stránce je k dispozici pod licencí
    <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported</a>
    <br>
    © Petr Viktorin, <a href="https://encukou.cz">encukou.cz</a>
    
            </p>
        </footer>
    </div><!-- /#container -->
    <div style="display:none"></div>
</body>
</html>