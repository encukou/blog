<!DOCTYPE html>
<html>
<head>
        <title>encukou/blog &mdash; Měnění objektů</title>
        <meta charset="utf-8" />
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <link rel="stylesheet" type="text/css" href="http://encukou.cz/theme/css/style.css" />
        <link href='http://fonts.googleapis.com/css?family=Signika|Jockey+One&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
        <style type="text/css">
            body.custom-background { background-color: #f5f5f5; }
        </style>
        <link rel="alternate" type="application/atom+xml"
            title="encukou/blog — Atom"
            href="http://encukou.cz/feeds/all.atom.xml" />
        <link rel="icon" type="image/png" href="http://encukou.cz/images/eck512.png">
        <!--[if lte IE 8]><script src="http://encukou.cz/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background single-author" >
    <div id="container">
        <div id="header">
                <h1 id="site-title"><a href="http://encukou.cz"><span class="_en">en</span><span class="_cu">cu</span><span class="_kou">kou</span>.cz</a></h1>
                <h2 id="site-description">primary colors underneath</h2>
        </div><!-- /#banner -->
        
        <div class="page-title">
        </div>

        <div id="menu">
            <div class="menu-navigation-container">
                <ul id="menu-navigation" class="menu">
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _kou"><a href="mailto:encukou@gmail.com">e-mail</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _cu"><a href="https://twitter.com/encukou">twitter</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page _en"><a href="http://github.com/encukou">github</a></li>
                        <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://encukou.cz">home</a></li>

                </ul>
            </div> <!--/#menu-navigation-container-->
        </div><!-- /#menu -->

        <div id="contents">

<div class="post type-post status-publish format-standard hentry category-general">
    <div class="entry-meta">
        <div class="date"><a href="http://encukou.cz/blog/2014/01/05/cs-meneni-objektu">2014-01-05</a></div>
    </div> <!-- /#entry-meta -->
    <div class="main">
        <h2 class="entry-title">
            <a href="http://encukou.cz/blog/2014/01/05/cs-meneni-objektu" title="Permalink to Měnění objektů" rel="bookmark">Měnění objektů</a>
        </h2>
        <div class="entry-content">
<p>Už víme, <a href="http://encukou.cz/blog/2014/01/05/cs-promenne-jsou-jmena">jak v&nbsp;Pythonu fungují proměnné</a>.
(Pokud ne, doporučuju to napřed zjistit,
už jen pro seznámení s&nbsp;mými uměleckými diagramy.)
Teď se pojďme podívat na to, jak se chovají jejich hodnoty – tedy&nbsp;objekty.</p>


<p>Toto je druhý ze série článků o&nbsp;tom, jak funguje Python.
Pokud jsi se dostala přímo sem, koukni na
<a href="http://encukou.cz/blog/2014/01/05/cs-rozcestnik-python">Rozcestník</a>
a&nbsp;trochu se zorientuj.</p>
<hr />
<p>Řetězce, stejně jako čísla nebo n-tice, jsou neměnitelné <em>(immutable)</em>.
To znamená, že se nedá žádným způsobem změnit jejich hodnota.
Chceme-li řetězec „změnit“, musíme vytvořit úplně nový objekt
s&nbsp;novou hodnotou.</p>
<div class="highlight"><pre><span></span><code><span class="n">retezec</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span>
<span class="n">retezec</span> <span class="o">=</span> <span class="n">retezec</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">retezec</span> <span class="o">=</span> <span class="n">retezec</span> <span class="o">+</span> <span class="s1">&#39;D&#39;</span>
<span class="n">retezec</span> <span class="o">=</span> <span class="n">retezec</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</code></pre></div>

<p>Tyhle příkazy vytvoří několik „sirotků“,
než do proměnné dostanou správnou hodnotu:</p>
<div class="highlight"><pre><span></span><code>┌─────────┐     ╔═══════╗
│ retezec ├─┐ ×→║ &#39;abc&#39; ║
└─────────┘ │   ╚═══════╝
            │   ╔═══════╗
            │ ×→║ &#39;ABC&#39; ║    ╔═════╗
            │   ╚═══════╝    ║ &#39;D&#39; ║
            │   ╔════════╗   ╚═════╝
            │ ×→║ &#39;ABCD&#39; ║
            │   ╚════════╝
            │   ╔═══════╗
            └──→║ &#39;BCD&#39; ║
                ╚═══════╝
</code></pre></div>

<p>Existují ale i&nbsp;objekty, které měnit lze. Klasický příklad jsou&nbsp;seznamy.</p>
<p>Jak funguje takový seznam?</p>
<p>Když napíšeme</p>
<div class="highlight"><pre><span></span><code><span class="n">jmeno</span> <span class="o">=</span> <span class="s1">&#39;hynek&#39;</span>
<span class="n">jmena</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;štěpán&#39;</span><span class="p">,</span> <span class="s1">&#39;vilém&#39;</span><span class="p">]</span>
</code></pre></div>

<p>dostaneme následující situaci:</p>
<div class="highlight"><pre><span></span><code>┌───────┐          ╔═════════╗
│ jmeno ├─────────→║ &#39;hynek&#39; ║
└───────┘          ╚═════════╝
┌───────┐    ╔═════╤═════╗
│ jmena ├───→║ [0] │ [1] ║
└───────┘    ╚══╪══╧══╪══╝
                │     │         ╔═════════╗
                │     └────────→║ &#39;vilém&#39; ║
                │ ╔══════════╗  ╚═════════╝
                └→║ &#39;štěpán&#39; ║ 
                  ╚══════════╝
</code></pre></div>

<p>Položky seznamu se chovají jako proměnné.
Stejně jako hodnota výrazu <code>jmeno</code> je teď <code>'hynek</code>',
výraz <code>jmena[0]</code> má hodnotu <code>'štěpán'</code>.
A&nbsp;stejně tak jako můžeme přiřadit do proměnné <code>jmeno</code>,
můžeme přiřadit i&nbsp;do <code>jmena[0]</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">jmena</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">jmeno</span>
</code></pre></div>

<p>a&nbsp;dostaneme stejný výsledek, jako by <code>jmena[0]</code> byla normální proměnná:</p>
<div class="highlight"><pre><span></span><code>┌───────┐          ╔═════════╗
│ jmeno ├─────────→║ &#39;hynek&#39; ║
└───────┘       ┌─→╚═════════╝
┌───────┐    ╔══╪══╤═════╗
│ jmena ├───→║ [0] │ [1] ║
└───────┘    ╚═════╧══╪══╝
                      │         ╔═════════╗
                      └────────→║ &#39;vilém&#39; ║
                                ╚═════════╝
                    * poof *
</code></pre></div>

<p>Protože je seznam objekt jako každý jiný,
může mít více jmen — může na něj ukazovat více proměnných.
Po příkazu</p>
<div class="highlight"><pre><span></span><code><span class="n">slova</span> <span class="o">=</span> <span class="n">jmena</span>
</code></pre></div>

<p>bude situace vypadat takhle:</p>
<div class="highlight"><pre><span></span><code>                   ╔═════════╗
                ┌─→║ &#39;hynek&#39; ║
                │  ╚═════════╝
┌───────┐    ╔══╪══╤═════╗
│ jmena ├───→║ [0] │ [1] ║
└───────┘ ┌─→╚═════╧══╪══╝
┌───────┐ │           │         ╔═════════╗
│ slova ├─┘           └────────→║ &#39;vilém&#39; ║
└───────┘                       ╚═════════╝
</code></pre></div>

<p>Seznam teď můžeme měnit pomocí kteréhokoli z&nbsp;těch dvou&nbsp;jmen.</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">jmena</span><span class="p">)</span>   <span class="c1"># → [&#39;hynek&#39;, &#39;vilem&#39;]</span>
<span class="n">slova</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;jarmila&#39;</span><span class="p">)</span>  <span class="c1"># na proměnnou `jmena` vůbec nesaháme!</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jmena</span><span class="p">)</span>   <span class="c1"># → [&#39;hynek&#39;, &#39;vilem&#39;, &#39;jarmila&#39;]</span>
</code></pre></div>

<p>Když si uvědomíme, co se děje uvnitř,
nemůže nás toto chování ničím překvapit.</p>
<div class="highlight"><pre><span></span><code>                   ╔═════════╗
                ┌─→║ &#39;hynek&#39; ║
                │  ╚═════════╝
┌───────┐    ╔══╪══╤═════╤═════╗   ╔═══════════╗
│ jmena ├───→║ [0] │ [1] │ [2] ╫──→║ &#39;jarmila&#39; ║
└───────┘ ┌─→╚═════╧══╪══╧═════╝   ╚═══════════╝
┌───────┐ │           │         ╔═════════╗
│ slova ├─┘           └────────→║ &#39;vilém&#39; ║
└───────┘                       ╚═════════╝
</code></pre></div>

<p>Toto chování je zdrojem častých chyb.
Musíme pořád mít na paměti, že pokud jakýkoli měnitelný objekt
(např. seznam, nebo slovník) poskytneme třeba nějaké funkci jako parametr,
ta funkce nám ho může pod rukama&nbsp;změnit.</p>
<p>Abychom zabránili chybám, je dobré co používat neměnitelné objekty
(řetězce, čísla, n-tice), a&nbsp;psát kód tak,
aby objekty neměnil pokud přímo&nbsp;nemusí.</p>
<p>Ještě připomenu, že pokud máš n-tici,
nelze přiřadit přímo do jejích položek:</p>
<div class="highlight"><pre><span></span><code><span class="n">ntice</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;def&#39;</span><span class="p">)</span>
<span class="n">ntice</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ghi&#39;</span>
<span class="c1"># → TypeError: &#39;tuple&#39; object does not support item assignment</span>
</code></pre></div>

<p>ale dej si pozor na i&nbsp;to,
že objekty které obsahuje se stále měnit dají:</p>
<div class="highlight"><pre><span></span><code><span class="n">seznam</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">ntice</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="n">seznam</span><span class="p">)</span>
<span class="n">seznam</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ntice</span><span class="p">)</span>  <span class="c1"># → (&#39;abc&#39;, [1, 2, 3, 4])</span>
<span class="n">ntice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seznam</span><span class="p">)</span>  <span class="c1"># → [1, 2, 3, 4, 5]</span>
</code></pre></div>

<p>A&nbsp;to je prozatím k&nbsp;měnění objektů všechno.
Příště se můžeš těšit na důkladný rozbor&nbsp;<em>přiřazování</em>.</p>        </div> <!--/#entry-content-->
            <span class="tag-links"><strong>⚑</strong>
 <a href="http://encukou.cz/blog/tag/mutability" rel="tag">mutability</a>,  <a href="http://encukou.cz/blog/tag/python" rel="tag">python</a>            </span>
        <ul class="article-links">
                <li><a href="mailto:encukou@gmail.com?subject=Re:+článek+'M%C4%9Bn%C4%9Bn%C3%AD%20objekt%C5%AF'">Přidat <em>komentář</em></a></li>
                <li><a href="https://github.com/encukou/blog/blob/master/posts/2014-01-05-03-cs-meneni-objektu.md"><em>Forknout</em> tenhle článek na Githubu</a></li>
        </ul>
    </div> <!--/#main-->
</div>  <!--/#post-->
        </div>


<ul class="prev-next">
    <li class="prev">
        <a href="http://encukou.cz/blog/2014/01/05/cs-promenne-jsou-jmena">
            Proměnné jsou jména
        </a>
    </li>
    <li class="next">
        <a href="http://encukou.cz/blog/2015/03/01/en-variable-types">
            Types as namespaces
        </a>
    </li>
</ul>
<span class="clearfix"></span>


        <footer id="footer">
            <p>
        
    tento blog používá systém <a href="http://getpelican.com/">Pelican</a>
    <br>
    styl adaptovaný z <a href="https://github.com/tbunnyman/pelican-chunk">pelican-chunk</a>
        © <a href="https://twitter.com/thisistran">Tran</a>
        a <a href="http://bunnyman.info/">tBunnyMan</a>
    <br>
    použité fonty: Signika © <a href="http://ancymonic.com/">Anna Giedryś</a>
        a Jockey One © <a href="www.type-together.com">TypeTogether</a>
    <br>
    tento blog je na <a href="https://github.com/encukou/blog">Githubu</a>
    <br>
    <br>
    text na této stránce je k dispozici pod licencí
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported</a>
    <br>
    © Petr Viktorin, <a href="http://encukou.cz">encukou.cz</a>
    
            </p>
        </footer>
    </div><!-- /#container -->
    <div style="display:none"></div>
</body>
</html>